define(["doc","modal","ajax","form","ENV"],function(e,a,n,i,s){"use strict";var d=e("#registerForm");e("#hasInternetDevice").on("change",function(){var e=this.checked;d.find(".required").toggleClass("disabled"),d.find(".fab").toggleClass("fab-disabled"),d.find(".mandatory").each(function(a){a.disabled=!e})}),i.mask(d.find(".cep").first(),"#####-###",i.CEP_SIZE),i.mask(d.find(".cnpj").first(),"##.###.###/####-##",i.CNPJ_SIZE),d.find("#shopPicture").on("change",function(){if(this.files&&this.files[0]){var e=new FileReader;e.onload=function(e){d.find(".preview").attr("src",e.target.result)},e.readAsDataURL(this.files[0])}}),i.validate("#registerForm",{success:function(e){e.preventDefault;var i=d.find(".bt-confirm-register");i.first().disabled=!0,i.addClass("loading");var t={name:d.find('[name="name"]').val(),cnpj:d.find('[name="cnpj"]').val(),email:d.find('[name="email"]').val(),address:{cep:d.find('[name="cep"]').val(),state:d.find('[name="state"]').val(),city:d.find('[name="city"]').val(),address:d.find('[name="address"]').val(),number:d.find('[name="number"]').val(),neighborhood:d.find('[name="neighborhood"]').val()},hasDelivery:d.find('[name="hasDelivery"]').first().checked};n.post(s.api.premarkets,t,{success:function(e,n){a.show(".modal-success",function(){d.find(".required").addClass("disabled"),d.find(".fab").addClass("fab-disabled"),d.find(".mandatory").each(function(e){e.disabled=!0})})},error:function(e,a){r(".error-api-message")},complete:function(e){i.first().disabled=!1,i.removeClass("loading")}},{async:!0,headers:{"Content-Type":"application/json"}})},error:function(){r(".empty-fields-message")}});var r=function(e){var a=d.find(e);a.toggleClass("hide"),setTimeout(function(){a.addClass("hide")},4e3)}});