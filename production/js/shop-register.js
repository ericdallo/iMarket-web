define(["doc","docanimation","ajax","form","ENV"],function(e,a,n,i,s){"use strict";var d=e("#registerForm");e("#hasInternetDevice").on("change",function(){var e=this.checked;d.find(".required").toggleClass("disabled"),d.find(".fab").toggleClass("fab-disabled"),d.find(".mandatory").each(function(a){a.disabled=!e})}),i.mask(d.find(".cep").first(),"#####-###",i.CEP_SIZE),i.mask(d.find(".cnpj").first(),"##.###.###/####-##",i.CNPJ_SIZE),d.find("#shopPicture").on("change",function(){if(this.files&&this.files[0]){var e=new FileReader;e.onload=function(e){d.find(".preview").attr("src",e.target.result)},e.readAsDataURL(this.files[0])}}),i.validate("#registerForm",{success:function(i){i.preventDefault;var r=d.find(".bt-confirm-register");r.first().disabled=!0,r.addClass("loading");var f={name:d.find('[name="name"]').val(),cnpj:d.find('[name="cnpj"]').val(),email:d.find('[name="email"]').val(),address:{cep:d.find('[name="cep"]').val(),state:d.find('[name="state"]').val(),city:d.find('[name="city"]').val(),address:d.find('[name="address"]').val(),number:d.find('[name="number"]').val(),neighborhood:d.find('[name="neighborhood"]').val()},hasDelivery:d.find('[name="hasDelivery"]').first().checked};n.post(s.api.premarkets,f,{success:function(n,i){a.fadeOut(d,10,function(){e(".modal-success").removeClass("hide")})},error:function(e,a){t(".error-api-message")},complete:function(e){r.first().disabled=!1,r.removeClass("loading")}},{async:!0,headers:{"Content-Type":"application/json"}})},error:function(){t(".empty-fields-message")}});var t=function(e){var a=d.find(e);a.toggleClass("hide"),setTimeout(function(){a.addClass("hide")},4e3)}});