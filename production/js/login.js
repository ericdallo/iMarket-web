define(["doc","ajax","form","loggedUser","facebook","ENV"],function(e,n,i,o,s,a){"use strict";var t=e("#loginForm");i.validate("#loginForm",{success:function(i){i.preventDefault;var s={username:e(this).find('[name="email"]').val(),password:e(this).find('[name="password"]').val()};n.post(a.api.login,s,{success:function(e,n){o.store(e),window.location="/"},error:function(e,n){c(".invalid-fields-message")},complete:function(e){}},{async:!0})},error:function(){c(".empty-fields-message")}}),t.find(".btn-facebook").on("click",function(e){e.preventDefault(),s.register({success:function(e){window.location="/"},error:function(){c(".email-already-exists")}})});var c=function(e){var n=t.find(e);n.toggleClass("hide"),setTimeout(function(){n.addClass("hide")},4e3)}});